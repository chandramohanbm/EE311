Version 4
SHEET 1 2552 1172
WIRE 160 -448 64 -448
WIRE 160 -416 160 -448
WIRE 0 -320 -32 -320
WIRE -128 -304 -128 -336
WIRE 160 -256 160 -336
WIRE 0 -240 0 -320
WIRE -32 -224 -64 -224
WIRE 96 -208 32 -208
WIRE -128 -192 -128 -224
WIRE -32 -192 -128 -192
WIRE -128 -176 -128 -192
WIRE 0 -144 0 -176
WIRE -128 -64 -128 -96
WIRE -64 -64 -64 -224
WIRE 144 -64 -64 -64
WIRE 160 -64 160 -160
WIRE 160 -64 144 -64
WIRE 160 0 160 -64
WIRE -128 48 -128 0
WIRE 160 160 160 80
WIRE 320 352 320 320
WIRE 592 352 320 352
WIRE 1024 352 592 352
WIRE 1472 352 1456 352
WIRE 1488 352 1472 352
WIRE 1568 352 1536 352
WIRE 1696 352 1568 352
WIRE 1824 352 1696 352
WIRE -176 384 -304 384
WIRE -48 384 -176 384
WIRE -16 384 -48 384
WIRE 48 384 32 384
WIRE 64 384 48 384
WIRE 592 384 592 352
WIRE 704 384 592 384
WIRE 1024 384 1024 352
WIRE 1024 384 928 384
WIRE 1696 384 1696 352
WIRE 1824 384 1824 352
WIRE -304 400 -304 384
WIRE 592 400 592 384
WIRE 1024 400 1024 384
WIRE 1568 400 1568 352
WIRE 1792 400 1744 400
WIRE -176 416 -176 384
WIRE 704 416 704 384
WIRE 928 416 928 384
WIRE -224 432 -272 432
WIRE -48 432 -48 384
WIRE 1696 432 1696 384
WIRE 288 480 272 480
WIRE 368 480 288 480
WIRE 544 480 448 480
WIRE 1120 480 1072 480
WIRE 1264 480 1200 480
WIRE 1312 480 1264 480
WIRE 1696 480 1504 480
WIRE 1696 496 1696 480
WIRE 1792 496 1792 400
WIRE 1824 496 1824 464
WIRE 1824 496 1792 496
WIRE -304 528 -304 480
WIRE -272 528 -272 432
WIRE -272 528 -304 528
WIRE -176 528 -176 512
WIRE 32 528 -176 528
WIRE 592 544 592 496
WIRE 704 544 704 480
WIRE 704 544 592 544
WIRE 720 544 704 544
WIRE 816 544 800 544
WIRE 928 544 928 480
WIRE 928 544 896 544
WIRE 1024 544 1024 496
WIRE 1024 544 928 544
WIRE 2048 544 1968 544
WIRE -448 576 -512 576
WIRE 1792 576 1792 496
WIRE 1792 576 1744 576
WIRE 592 592 592 544
WIRE 1024 592 1024 544
WIRE -272 608 -272 528
WIRE -224 608 -272 608
WIRE 704 608 704 544
WIRE 928 608 928 544
WIRE 1824 608 1824 592
WIRE 1568 624 1568 464
WIRE 1680 624 1568 624
WIRE 1696 624 1696 592
WIRE 1696 624 1680 624
WIRE -304 640 -304 624
WIRE -176 656 -176 624
WIRE -64 656 -176 656
WIRE -48 656 -48 496
WIRE -48 656 -64 656
WIRE 544 672 384 672
WIRE 1120 672 1072 672
WIRE 592 704 592 688
WIRE 704 704 704 672
WIRE 704 704 592 704
WIRE 928 704 928 672
WIRE 1024 704 1024 688
WIRE 1024 704 928 704
WIRE 384 736 320 736
WIRE 480 736 464 736
WIRE 592 736 592 704
WIRE 592 736 480 736
WIRE 1024 736 1024 704
WIRE 1024 736 592 736
WIRE 1600 736 1600 704
WIRE -96 752 -144 752
WIRE 320 768 320 736
WIRE 1712 784 1664 784
WIRE -224 816 -496 816
WIRE -144 816 -144 752
WIRE -32 832 -32 800
WIRE 0 832 -32 832
WIRE 704 832 656 832
WIRE 816 832 784 832
WIRE -32 848 -32 832
WIRE 1264 848 1008 848
WIRE 1600 864 1600 832
WIRE 1600 864 1568 864
WIRE 1712 864 1712 784
WIRE 2048 864 1792 864
WIRE 1600 880 1600 864
WIRE -144 896 -144 816
WIRE -96 896 -144 896
WIRE 1008 928 1008 848
WIRE 1056 928 1008 928
WIRE 1712 928 1712 864
WIRE 1712 928 1664 928
WIRE 544 944 496 944
WIRE 656 944 656 832
WIRE 656 944 624 944
WIRE 688 944 656 944
WIRE 1264 944 1264 848
WIRE 1264 944 1120 944
WIRE 816 960 816 832
WIRE 816 960 752 960
WIRE 864 960 816 960
WIRE 976 960 944 960
WIRE 1056 960 976 960
WIRE 688 976 656 976
WIRE 320 992 304 992
WIRE 544 1024 496 1024
WIRE 656 1024 656 976
WIRE 656 1024 624 1024
WIRE 656 1040 656 1024
WIRE 656 1152 656 1120
FLAG 320 768 0
FLAG 1312 480 V_Anew
FLAG 320 320 Vcc
FLAG 1024 544 V_ref
FLAG 272 480 V_Bnew
FLAG 592 544 V_ref2
FLAG 1200 672 V_B1
FLAG 1504 480 V_Anew
FLAG 1456 352 Vcc
FLAG 2048 544 V_A
FLAG 1824 608 0
FLAG 1680 624 V_ref
FLAG 32 528 V_Bnew
FLAG 64 384 Vcc
FLAG -512 576 V_B
FLAG -304 640 0
FLAG -64 656 V_ref2
FLAG 304 672 V_A1
FLAG 0 832 V_A1
FLAG -32 704 Vcc
FLAG -496 816 V_Aa
FLAG 1568 864 V_B1
FLAG 1600 704 Vcc
FLAG 2048 864 V_Bb
FLAG -32 944 0
FLAG 1600 976 0
FLAG -352 -288 0
FLAG -464 -288 0
FLAG -544 -368 V_A
FLAG -464 -368 V_B
FLAG -544 -288 0
FLAG -352 -368 Vcc
FLAG 64 -448 Vcc
FLAG 0 -144 0
FLAG -32 -320 Vcc
FLAG 160 160 0
FLAG 144 -64 5Vout
FLAG -128 48 0
FLAG -128 -336 Vcc
FLAG 288 560 0
FLAG 1264 560 0
FLAG -400 16 0
FLAG -480 16 0
FLAG -480 -64 V_Aa
FLAG -400 -64 V_Bb
FLAG 656 1152 0
FLAG 480 736 Shunt
FLAG 720 928 Vcc
FLAG 720 992 0
FLAG 496 1024 Shunt
FLAG 496 944 0
FLAG 1088 912 Vcc
FLAG 1088 976 0
FLAG 976 1024 0
FLAG 304 912 Vcc
FLAG 304 1072 0
FLAG 320 992 V_ADC
SYMBOL diode 720 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 944 480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 720 672 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 944 672 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL ind 704 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 5.8m
SYMBOL res 800 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 5.03
SYMBOL nmos 544 400 R0
WINDOW 3 -76 -15 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M1
SYMBOL nmos 1072 400 M0
WINDOW 3 -98 -18 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M2
SYMBOL nmos 1072 592 M0
WINDOW 3 -129 19 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M3
SYMBOL nmos 544 592 R0
WINDOW 3 -115 53 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M4
SYMBOL res 464 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 575.98
SYMBOL res 400 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 575.98
SYMBOL res 1216 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 575.98
SYMBOL res 1216 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 575.98
SYMBOL cap 1584 400 M0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL res 1808 480 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 1872 528 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10K
SYMBOL diode 1472 368 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL nmos 1744 496 M0
SYMATTR InstName M7
SYMBOL pmos 1744 480 R180
SYMATTR InstName M6
SYMBOL cap -64 432 R0
SYMATTR InstName C2
SYMATTR Value 100µ
SYMBOL res -288 496 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res -352 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10K
SYMBOL diode 48 400 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMBOL nmos -224 528 R0
WINDOW 0 78 39 Left 2
SYMATTR InstName M9
SYMBOL pmos -224 512 M180
WINDOW 0 69 31 Left 2
SYMATTR InstName M10
SYMBOL npn -96 704 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL pnp -96 944 M180
WINDOW 0 31 49 Left 2
WINDOW 3 50 68 Left 2
SYMATTR InstName Q2
SYMATTR Value BC557B
SYMBOL res -128 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5K
SYMBOL npn 1664 736 M0
SYMATTR InstName Q3
SYMATTR Value BC547B
SYMBOL pnp 1664 976 R180
WINDOW 0 31 49 Left 2
WINDOW 3 50 68 Left 2
SYMATTR InstName Q4
SYMATTR Value BC557B
SYMBOL res 1696 848 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5K
SYMBOL voltage -464 -384 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -105 156 Left 2
WINDOW 3 -116 133 Left 2
SYMATTR InstName Switch_Control_Signal_B1
SYMATTR Value PULSE(0 5 10m 1n 1n 6m 20m)
SYMBOL voltage -544 -384 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -184 180 Left 2
WINDOW 3 -218 202 Left 2
SYMATTR InstName Switch_Control_Signal_A1
SYMATTR Value PULSE(0 5 0 1n 1n 6m 20m)
SYMBOL voltage -352 -384 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -98 -44 Left 2
SYMATTR InstName Power_Supply
SYMATTR Value 13
SYMBOL npn -368 528 R0
SYMATTR InstName Q5
SYMATTR Value BC547B
SYMBOL npn 1888 496 M0
WINDOW 3 -54 112 Left 2
SYMATTR Value BC547B
SYMATTR InstName Q6
SYMBOL npn 96 -256 R0
SYMATTR InstName Q7
SYMATTR Value BC547B
SYMBOL Opamps\\UniversalOpamp2 0 -208 R0
SYMATTR InstName U2
SYMBOL res 144 -432 R0
SYMATTR InstName R18
SYMATTR Value 100
SYMBOL res 144 -16 R0
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL zener -112 0 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N750
SYMBOL res -144 -192 R0
SYMATTR InstName R20
SYMATTR Value 47
SYMBOL res -144 -320 R0
SYMATTR InstName R21
SYMATTR Value 1K
SYMBOL res 272 464 R0
SYMATTR InstName R12
SYMATTR Value 10K
SYMBOL res 1248 464 R0
SYMATTR InstName R13
SYMATTR Value 10K
SYMBOL voltage -480 -80 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -184 180 Left 2
WINDOW 3 -218 202 Left 2
SYMATTR InstName Switch_Control_Signal_A2
SYMATTR Value PULSE(0 5 0 1n 1n 10m 20m)
SYMBOL voltage -400 -80 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -105 156 Left 2
WINDOW 3 -116 133 Left 2
SYMATTR InstName Switch_Control_Signal_B2
SYMATTR Value PULSE(0 5 10m 1n 1n 10m 20m)
SYMBOL Opamps\\UniversalOpamp2 720 960 R0
SYMATTR InstName U1
SYMBOL Opamps\\UniversalOpamp2 1088 944 R0
SYMATTR InstName U3
SYMBOL res 640 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 27k
SYMBOL res 800 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName k
SYMATTR Value 560k
SYMBOL res 640 1008 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R
SYMATTR Value 27k
SYMBOL res 672 1136 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value 560k
SYMBOL res 480 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 0.1
SYMBOL cap 960 960 R0
SYMATTR InstName C3
SYMATTR Value 0.01µ
SYMBOL res 960 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 33k
SYMBOL res 288 896 R0
WINDOW 3 36 66 Left 2
SYMATTR Value 16K
SYMATTR InstName R24
SYMBOL res 288 976 R0
WINDOW 0 36 55 Left 2
WINDOW 3 37 78 Left 2
SYMATTR InstName R25
SYMATTR Value 10K
TEXT 576 272 Left 3 ;H - Bridge Switching Circuit
TEXT 440 304 Left 3 ;The inputs come from the microcontroller pins
TEXT -320 -232 Left 2 !.tran 300m
TEXT -168 416 Left 2 ;S
TEXT -240 448 Left 2 ;G
TEXT -168 504 Left 2 ;D
TEXT -168 544 Left 2 ;D
TEXT -168 624 Left 2 ;S
TEXT -240 568 Left 2 ;G
TEXT 1752 456 Left 2 ;G
TEXT 1752 560 Left 2 ;G
TEXT 1672 464 Left 2 ;D
TEXT 1672 496 Left 2 ;D
TEXT 1704 384 Left 2 ;S
TEXT 1704 600 Left 2 ;S
TEXT 1080 440 Left 2 ;G
TEXT 528 456 Left 2 ;G
TEXT 520 616 Left 2 ;G
TEXT 1080 648 Left 2 ;G
TEXT 1032 512 Left 2 ;S
TEXT 1040 696 Left 2 ;S
TEXT 560 696 Left 2 ;S
TEXT 568 512 Left 2 ;S
TEXT -368 576 Left 2 ;G
TEXT -288 624 Left 2 ;S
TEXT -296 312 Left 2 ;Gate Driver circuit
TEXT 1720 288 Left 2 ;Gate Driver circuit
TEXT -288 -496 Left 2 ;Power Supply unit
LINE Normal -624 976 -624 256 2
LINE Normal 160 976 -624 976 2
LINE Normal 160 256 160 976 2
LINE Normal -624 256 160 256 2
LINE Normal 2208 240 1408 240 2
LINE Normal 1456 1040 2224 1056 2
LINE Normal 1408 1040 1408 240 2
LINE Normal 1488 1040 1408 1040 2
LINE Normal 2224 240 2224 240 2
LINE Normal 2240 1056 2224 240 2
RECTANGLE Normal 320 208 -688 -544 2
