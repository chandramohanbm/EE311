Version 4
SHEET 1 1368 1052
WIRE -736 -64 -736 -80
WIRE -592 -64 -736 -64
WIRE -736 -48 -736 -64
WIRE -1344 -32 -1408 -32
WIRE -1216 -32 -1264 -32
WIRE -1104 -32 -1216 -32
WIRE -1008 -32 -1024 -32
WIRE -800 0 -832 0
WIRE -1216 48 -1216 -32
WIRE -1152 48 -1216 48
WIRE -592 48 -592 -64
WIRE -384 48 -384 16
WIRE -112 48 -384 48
WIRE 320 48 -112 48
WIRE -1008 64 -1008 -32
WIRE -1008 64 -1088 64
WIRE -944 64 -1008 64
WIRE -832 64 -832 0
WIRE -832 64 -864 64
WIRE -1344 80 -1408 80
WIRE -1200 80 -1264 80
WIRE -1152 80 -1200 80
WIRE -736 80 -736 48
WIRE -704 80 -736 80
WIRE -112 80 -112 48
WIRE 0 80 -112 80
WIRE 320 80 320 48
WIRE 320 80 224 80
WIRE -736 96 -736 80
WIRE -112 96 -112 80
WIRE 320 96 320 80
WIRE 0 112 0 80
WIRE 224 112 224 80
WIRE -832 144 -832 64
WIRE -800 144 -832 144
WIRE -400 176 -432 176
WIRE -160 176 -320 176
WIRE -592 192 -592 112
WIRE -592 192 -736 192
WIRE -112 224 -112 192
WIRE -112 240 -112 224
WIRE 0 240 0 176
WIRE 0 240 -112 240
WIRE 16 240 0 240
WIRE 112 240 96 240
WIRE 224 240 224 176
WIRE 224 240 192 240
WIRE 320 240 320 192
WIRE 320 240 224 240
WIRE -112 288 -112 240
WIRE 320 288 320 240
WIRE 0 304 0 240
WIRE 224 304 224 240
WIRE -736 336 -736 304
WIRE -592 336 -736 336
WIRE -736 352 -736 336
WIRE -400 368 -432 368
WIRE -160 368 -320 368
WIRE 416 368 368 368
WIRE -1344 384 -1408 384
WIRE -1216 384 -1264 384
WIRE -1104 384 -1216 384
WIRE -1008 384 -1024 384
WIRE -800 400 -832 400
WIRE -112 400 -112 384
WIRE 0 400 0 368
WIRE 0 400 -112 400
WIRE 224 400 224 368
WIRE 320 400 320 384
WIRE 320 400 224 400
WIRE -112 432 -112 400
WIRE -112 432 -384 432
WIRE 320 432 320 400
WIRE 320 432 -112 432
WIRE -592 448 -592 336
WIRE -1216 464 -1216 384
WIRE -1152 464 -1216 464
WIRE -832 464 -832 400
WIRE -832 464 -864 464
WIRE -384 464 -384 432
WIRE -1008 480 -1008 384
WIRE -1008 480 -1088 480
WIRE -944 480 -944 464
WIRE -944 480 -1008 480
WIRE -736 480 -736 448
WIRE -704 480 -736 480
WIRE -1344 496 -1408 496
WIRE -1200 496 -1264 496
WIRE -1152 496 -1200 496
WIRE -736 496 -736 480
WIRE -832 544 -832 464
WIRE -800 544 -832 544
WIRE -736 624 -736 592
WIRE -592 624 -592 512
WIRE -592 624 -736 624
WIRE -1328 768 -1328 736
WIRE -848 784 -848 752
WIRE -1392 816 -1440 816
WIRE -912 832 -960 832
WIRE -1440 880 -1440 816
WIRE -1328 896 -1328 864
WIRE -1184 896 -1328 896
WIRE -1328 912 -1328 896
WIRE -960 912 -960 832
WIRE -848 912 -848 880
WIRE -704 912 -848 912
WIRE -848 928 -848 912
WIRE -1440 960 -1440 880
WIRE -1392 960 -1440 960
WIRE -960 976 -960 912
WIRE -912 976 -960 976
FLAG -384 464 0
FLAG -1408 80 V_A
FLAG 448 176 V_Bnew
FLAG -384 16 Vcc
FLAG -1616 288 0
FLAG -1808 272 0
FLAG -1888 192 V_A
FLAG -1808 192 V_B
FLAG -112 224 V_ref
FLAG -1120 96 0
FLAG -1120 32 Vcc
FLAG -1888 272 0
FLAG -1408 -32 0
FLAG -432 176 V_Anew
FLAG -704 80 V_Anew
FLAG -1616 208 Vcc
FLAG -736 -80 Vcc
FLAG -736 192 V_ref
FLAG -704 480 V_Bnew
FLAG -736 304 Vcc
FLAG -1408 496 V_B
FLAG 320 240 V_ref2
FLAG -736 624 V_ref2
FLAG -1120 512 0
FLAG -1120 448 Vcc
FLAG -1408 384 0
FLAG 496 368 V_A1
FLAG -432 368 V_B1
FLAG -1200 160 V_ref
FLAG -1200 576 V_ref2
FLAG -1184 896 V_A1
FLAG -1328 736 Vcc
FLAG -1520 880 V_A
FLAG -704 912 V_B1
FLAG -848 752 Vcc
FLAG -1040 912 V_B
FLAG -1328 1008 0
FLAG -848 1024 0
SYMBOL diode 16 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 240 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 16 368 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 240 368 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL ind 0 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 5.8m
SYMBOL res 96 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 5.03
SYMBOL nmos -160 96 R0
WINDOW 3 -76 -15 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M1
SYMBOL nmos 368 96 M0
WINDOW 3 -160 135 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M2
SYMBOL nmos 368 288 M0
WINDOW 3 -62 -6 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M3
SYMBOL nmos -160 288 R0
WINDOW 3 -58 -11 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M4
SYMBOL voltage -1808 176 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -105 156 Left 2
WINDOW 3 -116 133 Left 2
SYMATTR InstName Switch_Control_Signal_B1
SYMATTR Value PULSE(0 5 0 1n 1n 0.05 0.1)
SYMBOL voltage -1888 176 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -184 180 Left 2
WINDOW 3 -218 202 Left 2
SYMATTR InstName Switch_Control_Signal_A1
SYMATTR Value PULSE(0 5 0.05 1n 1n 0.05 0.1)
SYMBOL voltage -1616 192 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -98 -44 Left 2
SYMATTR InstName Power_Supply
SYMATTR Value 13
SYMBOL Opamps\\UniversalOpamp2 -1120 64 R0
SYMATTR InstName U1
SYMBOL res -1248 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -1184 176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 100K
SYMBOL res -1248 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res -1008 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100K
SYMBOL npn -800 -48 R0
SYMATTR InstName Q1
SYMBOL pnp -800 192 M180
SYMATTR InstName Q2
SYMBOL res -848 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res -304 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL npn -800 352 R0
SYMATTR InstName Q3
SYMBOL pnp -800 592 M180
SYMATTR InstName Q4
SYMBOL res -848 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res -304 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL Opamps\\UniversalOpamp2 -1120 480 R0
SYMATTR InstName U2
SYMBOL res -1248 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100K
SYMBOL res -1184 592 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 100K
SYMBOL res -1248 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL res -1008 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100K
SYMBOL res 512 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 100
SYMBOL res 464 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL cap -608 48 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap -608 448 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL npn -1392 768 R0
SYMATTR InstName Q5
SYMATTR Value BC547B
SYMBOL pnp -1392 1008 M180
WINDOW 0 31 49 Left 2
WINDOW 3 50 68 Left 2
SYMATTR InstName Q6
SYMATTR Value BC557B
SYMBOL res -1424 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 5K
SYMBOL npn -912 784 R0
SYMATTR InstName Q7
SYMATTR Value BC547B
SYMBOL pnp -912 1024 M180
WINDOW 0 31 49 Left 2
WINDOW 3 50 68 Left 2
SYMATTR InstName Q8
SYMATTR Value BC557B
SYMBOL res -944 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 5K
TEXT 8 496 Left 3 ;H - Bridge Switching Circuit
TEXT -216 544 Left 3 ;The inputs come from the microcontroller pins
TEXT -1664 328 Left 2 !.tran 1
