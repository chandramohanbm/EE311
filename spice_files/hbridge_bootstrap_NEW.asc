Version 4
SHEET 1 2552 708
WIRE 2464 -640 2368 -640
WIRE 2464 -608 2464 -640
WIRE -96 -592 -224 -592
WIRE 32 -592 -96 -592
WIRE 64 -592 32 -592
WIRE 128 -592 112 -592
WIRE 144 -592 128 -592
WIRE -224 -576 -224 -592
WIRE -96 -560 -96 -592
WIRE -144 -544 -192 -544
WIRE 32 -544 32 -592
WIRE 944 -528 928 -528
WIRE 960 -528 944 -528
WIRE 1040 -528 1008 -528
WIRE 1168 -528 1040 -528
WIRE 1296 -528 1168 -528
WIRE 2304 -512 2272 -512
WIRE 1168 -496 1168 -528
WIRE 1296 -496 1296 -528
WIRE 1840 -496 1840 -528
WIRE 1040 -480 1040 -528
WIRE 1264 -480 1216 -480
WIRE -224 -448 -224 -496
WIRE -192 -448 -192 -544
WIRE -192 -448 -224 -448
WIRE -96 -448 -96 -464
WIRE 112 -448 -96 -448
WIRE 1168 -448 1168 -496
WIRE 2464 -448 2464 -528
WIRE 2304 -432 2304 -512
WIRE 2272 -416 2144 -416
WIRE 1168 -400 976 -400
WIRE 2400 -400 2336 -400
WIRE 1168 -384 1168 -400
WIRE 1264 -384 1264 -480
WIRE 1296 -384 1296 -416
WIRE 1296 -384 1264 -384
WIRE 1840 -384 1840 -416
WIRE 2272 -384 1840 -384
WIRE -192 -368 -192 -448
WIRE -144 -368 -192 -368
WIRE 1840 -368 1840 -384
WIRE -224 -336 -224 -352
WIRE 2304 -336 2304 -368
WIRE -96 -320 -96 -352
WIRE 16 -320 -96 -320
WIRE 32 -320 32 -480
WIRE 32 -320 16 -320
WIRE 1264 -304 1264 -384
WIRE 1264 -304 1216 -304
WIRE 1296 -272 1296 -288
WIRE 1040 -256 1040 -416
WIRE 1152 -256 1040 -256
WIRE 1168 -256 1168 -288
WIRE 1168 -256 1152 -256
WIRE 1840 -256 1840 -288
WIRE 2144 -256 2144 -416
WIRE 2448 -256 2144 -256
WIRE 2464 -256 2464 -352
WIRE 2464 -256 2448 -256
WIRE 2464 -192 2464 -256
WIRE 1840 -144 1840 -192
WIRE 384 -128 384 -160
WIRE 656 -128 384 -128
WIRE 1088 -128 656 -128
WIRE 656 -96 656 -128
WIRE 768 -96 656 -96
WIRE 1088 -96 1088 -128
WIRE 1088 -96 992 -96
WIRE 656 -80 656 -96
WIRE 1088 -80 1088 -96
WIRE 1664 -80 1664 -112
WIRE 768 -64 768 -96
WIRE 992 -64 992 -96
WIRE 1776 -32 1728 -32
WIRE 2464 -32 2464 -112
WIRE 128 -16 128 -48
WIRE 352 0 336 0
WIRE 368 0 352 0
WIRE 608 0 448 0
WIRE 1184 0 1136 0
WIRE 1328 0 1264 0
WIRE 1376 0 1328 0
WIRE 64 32 16 32
WIRE 1776 32 1776 -32
WIRE 1664 48 1664 16
WIRE 1664 48 1520 48
WIRE 656 64 656 16
WIRE 768 64 768 0
WIRE 768 64 656 64
WIRE 784 64 768 64
WIRE 880 64 864 64
WIRE 992 64 992 0
WIRE 992 64 960 64
WIRE 1088 64 1088 16
WIRE 1088 64 992 64
WIRE 1664 64 1664 48
WIRE 16 112 16 32
WIRE 128 112 128 80
WIRE 272 112 128 112
WIRE 656 112 656 64
WIRE 1088 112 1088 64
WIRE 1776 112 1776 32
WIRE 1776 112 1728 112
WIRE 128 128 128 112
WIRE 768 128 768 64
WIRE 992 128 992 64
WIRE 16 176 16 112
WIRE 64 176 16 176
WIRE 608 192 448 192
WIRE 1184 192 1136 192
WIRE 656 224 656 208
WIRE 768 224 768 192
WIRE 768 224 656 224
WIRE 992 224 992 192
WIRE 1088 224 1088 208
WIRE 1088 224 992 224
WIRE 656 256 656 224
WIRE 656 256 384 256
WIRE 1088 256 1088 224
WIRE 1088 256 656 256
WIRE 384 288 384 256
FLAG 384 288 0
FLAG 1376 0 V_Anew
FLAG 384 -160 Vcc
FLAG 1088 64 V_ref
FLAG 336 0 V_Bnew
FLAG 656 64 V_ref2
FLAG 1264 192 V_B1
FLAG 976 -400 V_Anew
FLAG 928 -528 Vcc
FLAG 1440 -336 V_A
FLAG 1296 -272 0
FLAG 1152 -256 V_ref
FLAG 112 -448 V_Bnew
FLAG 144 -592 Vcc
FLAG -368 -400 V_B
FLAG -224 -336 0
FLAG 16 -320 V_ref2
FLAG 368 192 V_A1
FLAG 1520 48 V_A1
FLAG 1664 -112 Vcc
FLAG 1856 32 V_Aa
FLAG 272 112 V_B1
FLAG 128 -48 Vcc
FLAG -64 112 V_Bb
FLAG 1664 160 0
FLAG 128 224 0
FLAG -656 -48 0
FLAG -768 -48 0
FLAG -848 -128 V_A
FLAG -768 -128 V_B
FLAG -848 -48 0
FLAG -656 -128 Vcc
FLAG -432 -48 0
FLAG -432 -128 5v
FLAG 2368 -640 Vcc
FLAG 2304 -336 0
FLAG 2272 -512 Vcc
FLAG 2464 -32 0
FLAG 2448 -256 5Vout
FLAG 1840 -144 0
FLAG 1840 -528 Vcc
FLAG 352 80 0
FLAG 1328 80 0
FLAG -800 384 0
FLAG -880 384 0
FLAG -880 304 V_Aa
FLAG -800 304 V_Bb
SYMBOL diode 784 0 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 1008 0 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 784 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 1008 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL ind 768 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 5.8m
SYMBOL res 864 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 5.03
SYMBOL nmos 608 -80 R0
WINDOW 3 -76 -15 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M1
SYMBOL nmos 1136 -80 M0
WINDOW 3 -98 -18 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M2
SYMBOL nmos 1136 112 M0
WINDOW 3 -129 19 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M3
SYMBOL nmos 608 112 R0
WINDOW 3 -115 53 Left 2
SYMATTR Value FQB55N10
SYMATTR InstName M4
SYMBOL res 464 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 575.98
SYMBOL res 464 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 575.98
SYMBOL res 1280 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 575.98
SYMBOL res 1280 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 575.98
SYMBOL cap 1056 -480 M0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL res 1280 -400 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 1344 -352 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10K
SYMBOL diode 944 -512 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL nmos 1216 -384 M0
SYMATTR InstName M7
SYMBOL pmos 1216 -400 R180
SYMATTR InstName M6
SYMBOL cap 16 -544 R0
SYMATTR InstName C2
SYMATTR Value 100µ
SYMBOL res -208 -480 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res -272 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10K
SYMBOL diode 128 -576 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMBOL nmos -144 -448 R0
SYMATTR InstName M9
SYMBOL pmos -144 -464 M180
SYMATTR InstName M10
SYMBOL npn 1728 -80 M0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL pnp 1728 160 R180
WINDOW 0 31 49 Left 2
WINDOW 3 50 68 Left 2
SYMATTR InstName Q2
SYMATTR Value BC557B
SYMBOL res 1760 16 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5K
SYMBOL npn 64 -16 R0
SYMATTR InstName Q3
SYMATTR Value BC547B
SYMBOL pnp 64 224 M180
WINDOW 0 31 49 Left 2
WINDOW 3 50 68 Left 2
SYMATTR InstName Q4
SYMATTR Value BC557B
SYMBOL res 32 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5K
SYMBOL voltage -768 -144 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -105 156 Left 2
WINDOW 3 -116 133 Left 2
SYMATTR InstName Switch_Control_Signal_B1
SYMATTR Value PULSE(0 5 10m 1n 1n 6m 20m)
SYMBOL voltage -848 -144 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -184 180 Left 2
WINDOW 3 -218 202 Left 2
SYMATTR InstName Switch_Control_Signal_A1
SYMATTR Value PULSE(0 5 0 1n 1n 6m 20m)
SYMBOL voltage -656 -144 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -98 -44 Left 2
SYMATTR InstName Power_Supply1
SYMATTR Value 13
SYMBOL npn -288 -448 R0
SYMATTR InstName Q5
SYMATTR Value BC547B
SYMBOL npn 1360 -384 M0
WINDOW 3 -54 112 Left 2
SYMATTR Value BC547B
SYMATTR InstName Q6
SYMBOL voltage -432 -144 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -98 -44 Left 2
SYMATTR InstName Power_Supply2
SYMATTR Value 5
SYMBOL npn 2400 -448 R0
SYMATTR InstName Q7
SYMATTR Value BC547B
SYMBOL Opamps\\UniversalOpamp2 2304 -400 R0
SYMATTR InstName U2
SYMBOL res 2448 -624 R0
SYMATTR InstName R18
SYMATTR Value 490
SYMBOL res 2448 -208 R0
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL zener 1856 -192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N750
SYMBOL res 1824 -384 R0
SYMATTR InstName R20
SYMATTR Value 20
SYMBOL res 1824 -512 R0
SYMATTR InstName R21
SYMATTR Value 20
SYMBOL res 336 -16 R0
SYMATTR InstName R12
SYMATTR Value 10K
SYMBOL res 1312 -16 R0
SYMATTR InstName R13
SYMATTR Value 10K
SYMBOL voltage -880 288 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -184 180 Left 2
WINDOW 3 -218 202 Left 2
SYMATTR InstName Switch_Control_Signal_A2
SYMATTR Value PULSE(0 5 0 1n 1n 10m 20m)
SYMBOL voltage -800 288 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -105 156 Left 2
WINDOW 3 -116 133 Left 2
SYMATTR InstName Switch_Control_Signal_B2
SYMATTR Value PULSE(0 5 10m 1n 1n 10m 20m)
TEXT 776 320 Left 3 ;H - Bridge Switching Circuit
TEXT 552 368 Left 3 ;The inputs come from the microcontroller pins
TEXT -624 8 Left 2 !.tran 300m
TEXT -88 -560 Left 2 ;S
TEXT -160 -528 Left 2 ;G
TEXT -88 -472 Left 2 ;D
TEXT -88 -432 Left 2 ;D
TEXT -88 -352 Left 2 ;S
TEXT -160 -408 Left 2 ;G
TEXT 1224 -424 Left 2 ;G
TEXT 1224 -320 Left 2 ;G
TEXT 1144 -416 Left 2 ;D
TEXT 1144 -384 Left 2 ;D
TEXT 1176 -496 Left 2 ;S
TEXT 1176 -280 Left 2 ;S
TEXT 1144 -40 Left 2 ;G
TEXT 592 -24 Left 2 ;G
TEXT 584 136 Left 2 ;G
TEXT 1144 168 Left 2 ;G
TEXT 1096 32 Left 2 ;S
TEXT 1104 216 Left 2 ;S
TEXT 624 216 Left 2 ;S
TEXT 632 32 Left 2 ;S
TEXT -288 -400 Left 2 ;G
TEXT -208 -352 Left 2 ;S
