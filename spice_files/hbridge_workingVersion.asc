Version 4
SHEET 1 1156 2644
WIRE -4080 400 -4080 368
WIRE -4080 400 -4272 400
WIRE -4080 432 -4080 400
WIRE -3632 480 -3808 480
WIRE -3808 560 -3808 480
WIRE -3760 560 -3808 560
WIRE -4272 576 -4272 400
WIRE -3632 576 -3632 480
WIRE -3632 576 -3696 576
WIRE -3552 576 -3632 576
WIRE -3856 592 -3952 592
WIRE -3760 592 -3856 592
WIRE -3856 624 -3856 592
WIRE -2304 672 -2352 672
WIRE -2256 672 -2304 672
WIRE -3056 688 -3120 688
WIRE -2928 688 -2976 688
WIRE -4320 752 -4432 752
WIRE -4208 752 -4320 752
WIRE -3856 752 -3856 704
WIRE -3024 800 -3024 768
WIRE -3200 816 -3344 816
WIRE -3120 816 -3120 688
WIRE -3056 816 -3120 816
WIRE -1504 816 -2160 816
WIRE -2928 832 -2928 688
WIRE -2928 832 -2992 832
WIRE -2720 832 -2928 832
WIRE -3056 848 -3120 848
WIRE -2304 848 -2304 672
WIRE -2032 848 -2304 848
WIRE -1600 848 -2032 848
WIRE -3856 864 -3856 816
WIRE -3024 880 -3024 864
WIRE -2032 880 -2032 848
WIRE -1920 880 -2032 880
WIRE -1600 880 -1600 848
WIRE -1600 880 -1696 880
WIRE -2032 896 -2032 880
WIRE -1600 896 -1600 880
WIRE -1920 912 -1920 880
WIRE -1696 912 -1696 880
WIRE -2128 976 -2352 976
WIRE -2080 976 -2128 976
WIRE -1504 976 -1504 816
WIRE -1504 976 -1552 976
WIRE -3120 992 -3120 848
WIRE -3120 992 -3696 992
WIRE -4320 1040 -4320 752
WIRE -2032 1040 -2032 992
WIRE -1920 1040 -1920 976
WIRE -1920 1040 -2032 1040
WIRE -1904 1040 -1920 1040
WIRE -1808 1040 -1824 1040
WIRE -1696 1040 -1696 976
WIRE -1696 1040 -1728 1040
WIRE -1600 1040 -1600 992
WIRE -1600 1040 -1696 1040
WIRE -2032 1088 -2032 1040
WIRE -1600 1088 -1600 1040
WIRE -4448 1104 -4720 1104
WIRE -1920 1104 -1920 1040
WIRE -1696 1104 -1696 1040
WIRE -4448 1136 -4720 1136
WIRE -4448 1168 -4720 1168
WIRE -2160 1168 -2160 816
WIRE -2160 1168 -2352 1168
WIRE -2080 1168 -2160 1168
WIRE -1504 1168 -1552 1168
WIRE -4448 1200 -4720 1200
WIRE -2032 1200 -2032 1184
WIRE -1920 1200 -1920 1168
WIRE -1920 1200 -2032 1200
WIRE -1696 1200 -1696 1168
WIRE -1600 1200 -1600 1184
WIRE -1600 1200 -1696 1200
WIRE -3088 1216 -3152 1216
WIRE -2960 1216 -3008 1216
WIRE -2032 1232 -2032 1200
WIRE -2032 1232 -2304 1232
WIRE -1600 1232 -1600 1200
WIRE -1600 1232 -2032 1232
WIRE -2128 1280 -2128 976
WIRE -1504 1280 -1504 1168
WIRE -1504 1280 -2128 1280
WIRE -3056 1328 -3056 1296
WIRE -3232 1344 -3328 1344
WIRE -3152 1344 -3152 1216
WIRE -3088 1344 -3152 1344
WIRE -2960 1360 -2960 1216
WIRE -2960 1360 -3024 1360
WIRE -2736 1360 -2960 1360
WIRE -3088 1376 -3152 1376
WIRE -3056 1408 -3056 1392
WIRE -3152 1504 -3152 1376
WIRE -3152 1504 -3696 1504
WIRE -2304 1504 -2304 1232
WIRE -3696 1600 -3696 1504
WIRE -3696 1696 -3696 1680
WIRE -2192 1728 -2256 1728
WIRE -1760 1728 -2192 1728
WIRE -1680 1728 -1760 1728
WIRE -3520 1744 -3712 1744
WIRE -3520 1776 -3712 1776
WIRE -3184 1840 -3376 1840
WIRE -3072 1840 -3104 1840
WIRE -2768 1840 -3072 1840
WIRE -3072 1888 -3072 1840
WIRE -2192 1968 -2192 1728
WIRE -1760 1968 -1760 1728
WIRE -2016 1984 -2128 1984
WIRE -1584 1984 -1696 1984
WIRE -4400 2000 -4400 1696
WIRE -3072 2064 -3072 1968
WIRE -2192 2128 -2192 2032
WIRE -1760 2128 -1760 2032
WIRE -2240 2192 -2288 2192
WIRE -1648 2192 -2240 2192
WIRE -2240 2288 -2240 2192
WIRE -2192 2288 -2240 2288
WIRE -2080 2304 -2128 2304
WIRE -2016 2304 -2080 2304
WIRE -2336 2320 -2384 2320
WIRE -2224 2320 -2256 2320
WIRE -2192 2320 -2224 2320
WIRE -2160 2384 -2160 2336
WIRE -1648 2400 -1648 2192
WIRE -1600 2400 -1648 2400
WIRE -1456 2416 -1536 2416
WIRE -1376 2416 -1456 2416
WIRE -1760 2432 -1792 2432
WIRE -1648 2432 -1680 2432
WIRE -1600 2432 -1648 2432
WIRE -2224 2464 -2224 2320
WIRE -2192 2464 -2224 2464
WIRE -2080 2464 -2080 2304
WIRE -2080 2464 -2112 2464
WIRE -1568 2496 -1568 2448
WIRE -1648 2576 -1648 2432
WIRE -1600 2576 -1648 2576
WIRE -1456 2576 -1456 2416
WIRE -1456 2576 -1520 2576
FLAG -2304 1504 0
FLAG -4272 656 0
FLAG -4080 400 Vcc
FLAG -3696 1072 0
FLAG -3344 816 0
FLAG -3024 768 Vcc
FLAG -3024 880 0
FLAG -2352 976 V_A
FLAG -2352 1168 V_B
FLAG -3328 1344 0
FLAG -3056 1296 Vcc
FLAG -3056 1408 0
FLAG -3696 1696 0
FLAG -2304 672 Vcc
FLAG -2160 2384 0
FLAG -1568 2496 0
FLAG -2288 2192 Vref
FLAG -2016 2304 M_PosA
FLAG -1376 2416 M_PosB
FLAG -1792 2432 HEsense1
FLAG -2384 2320 HEsense2
FLAG -1760 2128 0
FLAG -1760 1728 Vcc
FLAG -2192 2128 0
FLAG -2192 1728 Vcc
FLAG -2016 1984 HEsense2
FLAG -1584 1984 HEsense1
FLAG -3072 2064 0
FLAG -2768 1840 Vsense
FLAG -3376 1840 Vcc
FLAG -2720 832 V_A
FLAG -2736 1360 V_B
FLAG -2160 2272 Vcc
FLAG -1568 2384 Vcc
FLAG -4400 2000 0
FLAG -3520 1744 Vsense
FLAG -3520 1776 Isense
FLAG -4320 752 5V
FLAG -3856 864 0
FLAG -3952 592 Vcc
FLAG -3552 576 5V
SYMBOL diode -1904 976 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode -1680 976 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode -1904 1168 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode -1680 1168 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL ind -1920 1056 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 5.8m
SYMBOL res -1824 1056 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 4
SYMBOL voltage -4272 560 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -233 -6 Left 2
SYMATTR InstName Controller_Supply
SYMATTR Value 12
SYMBOL nmos -2080 896 R0
SYMATTR InstName M5
SYMATTR Value FQB55N10
SYMBOL voltage -3696 976 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 42 50 Left 2
SYMATTR InstName Switch_Control_Signal_A
SYMATTR Value PULSE(0 5 0 1n 1n 0.05 0.1)
SYMBOL nmos -1552 896 M0
SYMATTR InstName M4
SYMATTR Value FQB55N10
SYMBOL nmos -1552 1088 M0
SYMATTR InstName M1
SYMATTR Value FQB55N10
SYMBOL nmos -2080 1088 R0
SYMATTR InstName M2
SYMATTR Value FQB55N10
SYMBOL Opamps\\UniversalOpamp2 -3024 832 R0
SYMATTR InstName U1
SYMBOL res -3104 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 31 76 VTop 2
SYMATTR InstName R4
SYMATTR Value 1K
SYMBOL res -2960 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 26 48 VTop 2
SYMATTR InstName R5
SYMATTR Value 2K
SYMBOL Opamps\\UniversalOpamp2 -3056 1360 R0
SYMATTR InstName U2
SYMBOL res -3136 1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 31 76 VTop 2
SYMATTR InstName R2
SYMATTR Value 1K
SYMBOL res -2992 1200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 26 48 VTop 2
SYMATTR InstName R3
SYMATTR Value 2K
SYMBOL voltage -3696 1584 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 42 50 Left 2
SYMATTR InstName Switch_Control_Signal_B
SYMATTR Value PULSE(0 5 0.05 1n 1n 0.05 0.1)
SYMBOL Opamps\\UniversalOpamp2 -2160 2304 R0
SYMATTR InstName U3
SYMBOL Opamps\\UniversalOpamp2 -1568 2416 R0
SYMATTR InstName U4
SYMBOL res -2096 2448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMBOL res -2240 2304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMBOL res -1664 2416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMBOL res -1504 2560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMBOL res -3088 1824 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMBOL res -3088 1872 R0
SYMATTR InstName R12
SYMBOL Opamps\\UniversalOpamp2 -3728 576 R0
SYMATTR InstName U5
SYMBOL res -3872 608 R0
SYMATTR InstName R6
SYMBOL zener -3840 816 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value 1N750
TEXT -1912 1296 Left 3 ;H - Bridge Switching Circuit
TEXT -3960 1904 Left 2 !.tran 300m
TEXT -3032 912 Left 2 ;Amplifier unit
TEXT -3064 1440 Left 2 ;Amplifier unit
TEXT -2136 1344 Left 3 ;The inputs come from the microcontroller pins
TEXT -4128 1376 Left 7 ;uC
TEXT -1872 1992 Left 3 ;Hall Effect
TEXT -2304 1992 Left 3 ;Hall Effect
TEXT -1656 2152 Left 3 ;Shaft Position Detection
TEXT -3344 2104 Left 3 ;Potential Divider for Voltage Sensing
TEXT -3384 2152 Left 3 ;To get 0-12 down to 0-5V use ratio: R1 = 1.4R2
TEXT -4936 1144 Left 7 ;PC
TEXT -4664 1080 Left 2 ;USB Interface
TEXT -3200 2616 Left 3 ;CurrentSensing
RECTANGLE Normal -1472 1312 -2192 784 1
RECTANGLE Normal -3328 672 -3328 672 2
RECTANGLE Normal -2816 944 -3312 608 2
RECTANGLE Normal -2832 1472 -3296 1120 2
RECTANGLE Normal -4480 912 -3600 1792 2
RECTANGLE Normal -1664 2064 -1872 1920 2
RECTANGLE Normal -2096 2064 -2304 1920 2
RECTANGLE Normal -2544 2624 -1248 1792 2
RECTANGLE Normal -2816 2128 -3344 1728 2
RECTANGLE Normal -5024 1264 -4688 1040 2
RECTANGLE Normal -2816 2640 -3344 2240 2
